<?xml version="1.0"?>
	<templateDefinition id="email_task_assign"> <!-- Template id same as the file name without .xml ! -->
     	<fields>
			<field name="type" type="an..180" displayType="system"> <!-- document type for the current template -->
				<value>emailTemplate</value>
			</field>
		    <field name="title" type="an..100" displayType="system"> <!-- Template title -->
				<value>Task assignment email template</value>
			</field>
		    <field name="description" type="an..180" displayType="system"> <!-- Template description -->
				<value>This is the default email template used for generating notifications on task assignment.</value>
			</field>
			<field name="primary" type="boolean" displayType="system" > <!-- If the template is primary/default -->
				<value>false</value>
			</field>
		    <field name="mimetype" type="an..20" displayType="system"><value>text/plain</value></field>
		    <field name="createdBy" type="uri" displayType="system"><value>${currentUser.id}</value><control id="PICKER"/></field>
		    <field name="createdOn" type="dateTime" displayType="system"><value>${today}</value></field>
			<field name="public" type="boolean" displayType="system"><value>true</value></field>
			
			<!-- Template content specific properties -->
			
			
			<!-- other configuration should come here -->
			
			<!-- The actual template content -->
		    <field name="content" type="ANY" displayType="system"> <!-- NOTE: the content goes into the CDATA tag. The tag is used to escape the internal XML -->
				<value>
					<![CDATA[
<#assign lang=notifications.getUserLanguage(user)>
<#assign title=target.properties['title']>
<#assign type=codelists.getCodeValue(227, target.properties['type']).properties[lang]>
<#assign identifier=target.properties['identifier']>

Hello, ${user.properties['firstName']},<br>
a new task on ${identifier},${type}, ${title} has been<br>
assigned to you:<br>
Task ID:  ${identifier}<br>
Task type:  ${type}<br>
Title:  <#if target.getClass().getSimpleName() == 'TaskInstance'>${type}<#else>${title}</#if><br>
<#if target.properties['plannedEndDate']?? >Planned end date:  ${target.properties['plannedEndDate']?string("MMMMM/dd/yyyy")}<br></#if>
Creator:  ${notifications.getDisplayName(target.properties['createdBy'])}<br>
Priority:  ${codelists.getCodeValue(208, target.properties['priority']).properties[lang]}<br>
To view all task details click the link below:<br>
<a href="${notifications.buildFullURI(target)}">${title}</a><br>
Regards,<br>
Administrator <br>
					]]>
				</value>
			</field>
		</fields>
   	</templateDefinition>