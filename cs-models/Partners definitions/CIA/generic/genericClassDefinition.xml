<?xml version="1.0"?>
<definition id="classDefinition" type="class">
    <fields>
        <field name="default_header" type="ANY" label="CLASS_DEFAULT_HEADER" mandatory="false" displayType="system" uri="emf:default_header" />
        <field name="compact_header" type="an..4096" label="CLASS_COMPACT_HEADER" mandatory="false" displayType="system" uri="emf:compact_header" />
        <field name="breadcrumb_header" type="an..4096" label="CLASS_BREADCRUMB_HEADER" mandatory="false" displayType="system" uri="emf:breadcrumb_header" />
        <field name="tooltip_header" type="an..4096" label="CLASS_TOOLTIP_HEADER" mandatory="false" displayType="system" uri="emf:tooltip_header"/>

	    <field name="creator" type="an..35" label="CREATOR" mandatory="false" displayType="editable" uri="dc:creator " />
        <field name="title" type="an..40" order="60" label="GEO10001.title" mandatory="true" displayType="editable" previewEmpty="false" dmsType="cm:title" uri="dcterms:title" />
        <field name="description" type="an..10000" order="70" label="GEO10001.description" mandatory="false" displayType="editable" previewEmpty="false" dmsType="cm:description" uri="dcterms:description" />
        <field name="status" type="an..50" order="50" label="GEO10001.status" mandatory="false" codelist="CL17" displayType="system" previewEmpty="false" dmsType="emf:status" uri="emf:status" />
        <field name="type" type="an..50" order="10" label="classDefinition.type" mandatory="false" codelist="CL3" displayType="readOnly" dmsType="pm:type" uri="emf:type" previewEmpty="true">
    		<value>classDefinition</value>
  		</field>
	    <field name="createdOn" 	type="dateTime" label="createdOn.label" displayType="system" uri="emf:createdOn" dmsType="FORBIDDEN"/>
	    <field name="createdBy" 	type="uri" 	label="createdBy.label" displayType="system" uri="emf:createdBy" dmsType="FORBIDDEN">
	    	<control id="PICKER">
	    		<control-param id="range" name="range">emf:User</control-param>
	    	</control>
	    </field>
	   	<field name="modifiedOn"  	type="dateTime" displayType="system" label="modifiedOn.label" uri="emf:modifiedOn" dmsType="FORBIDDEN"/>
	    <field name="modifiedBy"    type="uri" 	displayType="system" label="modifiedBy.label" uri="emf:modifiedBy" dmsType="FORBIDDEN">
	    	<control id="PICKER">
	    		<control-param id="range" name="range">emf:User</control-param>
	    	</control>
	    </field>	 	
	    <field name="emf:version" 	type="an..10" label="object.version" displayType="hidden" dmsType="FORBIDDEN" uri="emf:version"/>         
        <field name="defaultTemplate" type="an..50" order="41" displayType="system" dmsType="dom:defaultTemplate" uri="emf:defaultTemplate">
                <value>ontologyClassTemplate</value>
        </field>
        <field name="rdf:type" type="uri" order="11" label="ontologyType.label" displayType="system" uri="rdf:type" dmsType="FORBIDDEN">
            <value>http://ittruse.ittbg.com/ontology/enterpriseManagementFramework#ClassDescription</value>
        </field>
        <field name="emf:isDeleted" type="boolean" displayType="system" uri="emf:isDeleted" dmsType="FORBIDDEN">
        	<value>false</value>
        </field>
		
		<field name="partOfObjectLibrary" type="boolean" label="classDefinition.partOfObjectLibrary" displayType="readonly" uri="emf:isPartOfObjectLibrary" dmsType="FORBIDDEN">
			<value>false</value>
		</field>
		<field name="searchable" type="boolean" label="classDefinition.searchable" displayType="readonly" uri="emf:isSearchable" dmsType="FORBIDDEN">
			<value>false</value>
		</field>
		<field name="createable" type="boolean" label="classDefinition.createable" displayType="readonly" uri="emf:isCreateable" dmsType="FORBIDDEN">
			<value>false</value>
		</field>
		<field name="uploadable" type="boolean" label="classDefinition.uploadable" displayType="readonly" uri="emf:isUploadable" dmsType="FORBIDDEN">
			<value>false</value>
		</field>
		<field name="versionable" type="boolean" label="classDefinition.versionable" displayType="readonly" uri="emf:isVersionable" dmsType="FORBIDDEN">
			<value>true</value>
		</field>
		<field name="acceptDataTypePattern" type="an..1024" label="classDefinition.acceptDataTypePattern" displayType="readonly" uri="emf:acceptDataTypePattern" dmsType="FORBIDDEN">
		</field>
		<field name="classCategory" type="an..20" label="classDefinition.classCategory" displayType="readonly" uri="emf:classCategory" dmsType="FORBIDDEN">
		</field>
    </fields>
    
    <transitions>
        <transition id="managePermissions" label="managePermissions.label" eventId="managePermissions" purpose="managePermissions" tooltip="managePermissions.tooltip" />
<!--    <transition id="restorePermissions" label="restorePermissions.label" eventId="restorePermissions" purpose="restorePermissions" />       
-->		<transition id="viewDetails" label="viewDetails.label" eventId="viewDetails" purpose="viewDetails" displayType="hidden" /> 
 		<transition id="addIcons" label="addIcons.label" eventId="addIcons" purpose="addIcons" tooltip="addIcon.tooltip" />
 		<transition id="editDetails" label="editDetails.label" eventId="editDetails" purpose="editDetails" tooltip="editDetails.tooltip" />
        <transition id="lock" label="lock.label" eventId="lock" purpose="lock" tooltip="lock.tooltip" />
		<transition id="unlock" label="unlock.label" eventId="unlock" purpose="unlock" tooltip="unlock.tooltip" />
		<transition id="saveAsTemplate" label="saveAsTemplate.label" eventId="saveAsTemplate" purpose="saveAsTemplate" tooltip="saveAsTemplate.tooltip" />
		<transition id="createInContext" eventId="createInContext" purpose="createInContext" label="createInContext.label" displayType="hidden" />
    </transitions>
    
    <stateTransitions>
        <stateTransition from="APPROVED" transition="managePermissions" to="APPROVED" />
<!--    <stateTransition from="APPROVED" transition="restorePermissions" to="APPROVED" />
-->     <stateTransition from="APPROVED" transition="viewDetails" to="APPROVED" />
        <!-- Object actions will work only deployed object module -->
		<stateTransition from="APPROVED" transition="createObject" to="APPROVED"/>
		<stateTransition from="APPROVED" transition="editDetails" to="APPROVED"/>
		<stateTransition from="APPROVED" transition="lock" to="APPROVED"/>
		<stateTransition from="APPROVED" transition="unlock" to="APPROVED"/>
		<stateTransition from="APPROVED" transition="createInContext" to="APPROVED"/>
		<!-- Conservation customization
		<stateTransition from="APPROVED" transition="saveAsTemplate" to="APPROVED"/> -->
		<stateTransition from="APPROVED" transition="addIcons" to="APPROVED"/>
    </stateTransitions>
    
    <labels>
    	<label id="classDefinition.btn.createObject">
			<value lang="bg">Нов Обект</value>
            <value lang="en">New Object</value>
        </label>
<!--        <label id="classDefinition.restorePermissions.btn.title">
			<value lang="bg">Възстановяване на Права</value>
			<value lang="en">Restore Permissions</value>
		</label>
-->	    <label id="CLASS_TOOLTIP_HEADER">
			<value lang="en"><![CDATA[${eval(#{eval(
                <span class="thumbnail-content">
                    <img class="thumbnail" src="${thumbnailUri(64)}" />
                </span>
                <span class="tooltip-data">
                    <span class="tooltip-header">
                        <a href="${link(currentInstance)}" class="instance-link" data-status="${get([status])}" data-id="${id.db}" data-uid="${id.uid}">
                            <span data-type="${get([type])}">(${CL([type])})</span>&nbsp;
                            <span data-title="${get([title])}">${get([title])}</span>
                        </a>
                    </span>
                    ${if(${get([description])}<>null).then(
						<span class="tooltip-row">
							<label>Description: </label>
							<span data-property="description">${get([description])}</span>
						</span>
					)}
					${if(${get([modifiedBy])}<>null).then(
						<span class="tooltip-row">
							<label>System modified by: </label>
							<span data-property="modifiedBy">${user(${get([modifiedBy])})}</span>
						</span>
					)}
					${if(${get([modifiedOn])}<>null).then(
						<span class="tooltip-row">
							<label>System modified on: </label>
							<span data-property="modifiedOn">${date([modifiedOn]).format(dd.MM.yyyy, HH:mm)}</span>
						</span>
					)}
                </span>
            )})}]]></value>
		</label>
		<label id="CLASS_DEFAULT_HEADER">
			<value lang="en"><![CDATA[${eval(
				${var.isVersion= ${if(${get([isVersion])} == true).then(true).else(false)}}
				<span><img src="${thumbnailUri(64)}"/></span>
				<span>           
					<span class="truncate-element">
						<a href="${link(currentInstance)}" class="instance-link has-tooltip" uid="${id.uid}">
							<b>
								<span data-property="title">${get([title])}</span>&nbsp;Library
							</b>
						</a>
						${if(${var.isVersion}).then(
							&nbsp;<span data-property="emf:version" class="object-version version badge">${get([emf:version])}</span>
						)}
					</span>
             	 <br /><span class="banner label label-warning">${if(${get([lockedBy])} <> null).then(${label(object.lockedBy)}${get([lockedBy])})}</span>
				</span>)}]]>
			</value>
		</label>
		<label id="CLASS_COMPACT_HEADER">
			<value lang="en"><![CDATA[${eval(
			${var.isVersion= ${if(${get([isVersion])} == true).then(true).else(false)}}
            <span><img src="${thumbnailUri(16)}"/></span>
            <span>
                <span class="banner label label-warning">${if(${get([lockedBy])} <> null).then(${label(object.lockedBy)}${get([lockedBy])})}</span>
                <span class="truncate-element">
                    <a class="instance-link has-tooltip" href="${link(currentInstance)}" uid="${id.uid}">
                        <b>
                            <span data-property="title">${get([title])}</span>&nbsp;Library
                        </b>                        
                    </a>
					${if(${var.isVersion}).then(
						&nbsp;<span data-property="emf:version" class="object-version version badge">${get([emf:version])}</span>
					)}
                </span>
            </span>)}]]></value>
		</label>
		<label id="CLASS_BREADCRUMB_HEADER">
			<value lang="en"><![CDATA[${eval(
				<span><img src="${thumbnailUri(16)}"/></span>
				<span>
					<a class="instance-link has-tooltip" href="${link(currentInstance)}" uid="${id.uid}">
						<span data-property="title">${get([title])}</span>&nbsp;Library
					</a>
				</span>)}]]>
			</value>
		</label>
        <label id="CREATOR">
			<value lang="bg">Създадена от</value>
			<value lang="en">Created by</value>
    	</label>
        <label id="classDefinition.partOfObjectLibrary">
			<value lang="bg">Библиотека</value>
			<value lang="en">Library</value>
    	</label>
        <label id="classDefinition.searchable">
			<value lang="bg">Може да се търси</value>
			<value lang="en">Searchable</value>
    	</label>
        <label id="classDefinition.createable">
			<value lang="bg">Може да се създава</value>
			<value lang="en">Createable</value>
    	</label>
        <label id="classDefinition.uploadable">
			<value lang="bg">Може да се качва</value>
			<value lang="en">Uploadable</value>
    	</label>
        <label id="classDefinition.versionable">
			<value lang="bg">Може да се версионира</value>
			<value lang="en">Versionable</value>
    	</label>
        <label id="classDefinition.acceptDataTypePattern">
			<value lang="bg">Филтър за качване</value>
			<value lang="en">Data type filter</value>
    	</label>
        <label id="classDefinition.classCategory">
			<value lang="bg">Категория</value>
			<value lang="en">Category</value>
    	</label>
    	<label id="classDefinition.type">
			<value lang="bg">Библиотека</value>
			<value lang="en">Library</value>
        </label>
    </labels>
</definition>
