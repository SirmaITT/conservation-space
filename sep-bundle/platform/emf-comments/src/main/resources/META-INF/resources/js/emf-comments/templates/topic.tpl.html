<div class="topic-wrapper" data-ng-class="{ 'collapsed': collapsed }">
	<inline-comment class="topic" data-ng-hide="editing &#38;&#38; inline" data-model="topic" data-collapsed="collapsed" data-for-topic="true">
		<div class="topic-content emf-tiny-editor" data-ng-bind-html="topic.content | trustAsHtmlFilter"></div>
	</inline-comment>
	
	<inline-comment-editor data-ng-if="editing &#38;&#38; inline" 
		data-model="editModel" 
		data-on-save="updateTopic()"
		data-toggle-editor-mode="togglePopupEditor()"
		data-for-topic="true">
	</inline-comment-editor>

	<popup-comment-editor data-ng-if="editing &#38;&#38; !inline" 
		data-model="editModel" 
		data-on-save="updateTopic()"
		data-on-cancel="cancelEditTopic()"
		data-for-topic="true">
	</popup-comment-editor>

	<div class="show-more-wrapper">
		<div class="topic-details-wrapper" data-ng-hide="!showMore || collapsed">
			<div class="topic-tags">
				<tag-select data-on-change="onTagsChange()" style="width: 100%;" placeholder="Tags" data-model="topic.tags" data-tags="getAllTags()"></tag-select>
			</div>
			<div class="topic-category">
				<label>Category: </label>
				<span>
					<select-one data-on-change="onTagsChange()" style="width: 200px;" data-model="topic.type" data-options="categories"></select-one>
				</span>
			</div>
			<div class="topic-status">
				<label>Status: </label> <span>{{topic.status | codelistFilter:statuses}}</span>
			</div>
		</div>
		<a data-ng-hide="collapsed" 
			class="toggle-show-more-btn" 
			href="javascript:void(0);"
			data-ng-click="toggleShowMore()">
			{{showMoreLabel}}
		</a>
	</div>
	
	<div class="topic-replies-wrapper clearfix" data-ng-hide="collapsed">
		<reply data-ng-show="repliesLoaded" data-ng-repeat="reply in topic.children"></reply>
	</div>

	<inline-comment-editor class="inline-reply" data-ng-if="!collapsed &#38;&#38; inlineReply"
		data-model="newReply" 
		data-on-save="saveNewReply()"
		data-toggle-editor-mode="togglePopupReplyEditor()"
		data-autofocus="false">
	</inline-comment-editor>

	<popup-comment-editor data-ng-if="!collapsed &#38;&#38; !inlineReply" 
		data-model="newReply" 
		data-on-save="saveNewReply()"
		data-on-cancel="cancelNewReply()">
	</popup-comment-editor>
</div>