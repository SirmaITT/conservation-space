<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:rich="http://richfaces.org/rich" xmlns:a4j="http://richfaces.org/a4j" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:emf="http://com.sirma.itt.emf" xmlns:h="http://java.sun.com/jsf/html">

	<h:panelGroup id="myObjectsPanel" styleClass="dashboard-panel objects-panel list-content col-lg-4" layout="block">
		<div class="widget-content">
		<div class="panel-header rf-p-hdr">
			<div class="panel-title">#{label['cmf.user.dashboard.objects.panel.header']}</div>

			<ui:include src="/search/dashlet-search/total-count.xhtml">
				<ui:param name="panelId" value="myObjectsPanel" />
				<ui:param name="action" value="#{myObjectsPanel}" />
			</ui:include>

			<ui:include src="/dashlet/dashlet-controls.xhtml">
				<ui:param name="panelId" value="myObjectsPanel" />
				<ui:param name="action" value="#{myObjectsPanel}" />
			</ui:include>
		</div>

		<h:panelGroup id="objectsPanelToolbar" styleClass="panel-toolbar">
			<ui:include src="/search/dashlet-search/search-toolbar.xhtml">
				<ui:param name="panelId" value="myObjectsPanel" />
				<ui:param name="action" value="#{myObjectsPanel}" />
				<ui:param name="renderId" value="myObjectsPanel" />
			</ui:include>

			<div class="allowed-actions-inline" id="myObjectPanelToolbarActions">
				<div>
					<div class="btn-group allowed-action-image-button">
						<button disabled="disabled" type="button" class="btn btn-default btn-xs">#{label['cmf.btn.actions']}</button>
						<button type="button" class="btn btn-default dropdown-toggle static actions-menu-trigger"
							data-toggle="dropdown tooltip">
							<span class="caret"></span>
							<span class="sr-only">Toggle Dropdown</span>
						</button>
						<ul id="createCulturalObject" class="hidden-actions dropdown-menu rf-ulst">
							<li class="">
								<a4j:commandLink id="createObjectButton"
									action="#{actionsManager.executeContextAction('createObject', 'objectinstance')}"
									value="#{label['object.panel.create.object']}" styleClass="drop-down-actions createObject blockUI">
									<div class="tooltip">
										<span>#{label['object.panel.create.object']}</span>
									</div>
								</a4j:commandLink>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</h:panelGroup>

		<div class="panel-body objects-list-panel-body">
			<rich:list id="objectList" value="#{myObjectsPanel.result}" var="objectInstance" type="unordered"
				rowClass="list-item">
				<ui:include src="/common/banner.xhtml">
					<ui:param name="renderIf" value="#{objectCheckLockedAction.isLocked(objectInstance)}" />
					<ui:param name="label" value="#{labelBuilder.getObjectIsLockedMessage(objectInstance)}" />
					<ui:param name="bannerClass" value="info-banner" />
				</ui:include>
				<emf:treeHeader currentInstance="#{objectInstance}" renderThumbnail="true" mode="#{dashletsTreeHeaderMode}"
					display="#{dashletsTreeHeaderDisplay}" size="#{dashletsTreeHeaderSize}" />
				<div class="item-link-min">
					<ui:include src="/common/min-allowed-actions.xhtml">
						<ui:param name="currentInstance" value="#{objectInstance}" />
						<ui:param name="contextInstance" value="#{documentContext.getCurrentInstance()}" />
						<ui:param name="sectionInstance" value="#{sectionInstance}" />
						<ui:param name="ajaxLoaderRenderElement" value=".objects-list-panel-body" />
						<ui:param name="placeholder" value="#{myObjectsPanel.targetDashletName()}" />
					</ui:include>
				</div>
			</rich:list>
		</div>
		<a4j:commandLink id="refreshObjectDashlet" value="object dashlet" action="refreshObjectDashlet"
			onclick="EMF.ajaxloader.showLoading('.objects-list-panel-body');"
			oncomplete="EMF.ajaxloader.hideLoading('.objects-list-panel-body');" styleClass="load-objects-link hide"
			render="objectList, objectsPanelToolbar" execute="@this" />
		</div>
	</h:panelGroup>

</ui:composition>
