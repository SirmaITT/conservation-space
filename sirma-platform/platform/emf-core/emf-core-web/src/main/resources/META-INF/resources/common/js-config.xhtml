<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:emf="http://com.sirma.itt.emf"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<ui:composition>
    <script type="text/javascript">
		// application context path
		EMF.config.applicationPath = EMF.applicationPath = '#{facesContext.externalContext.requestContextPath}';
		// path to the rest services
		EMF.servicePath = EMF.config.servicePath = EMF.applicationPath + '/service';
		// contains data for the current logged in user
		EMF.currentUser = { 
			displayName: '#{emf:escapeJS(currentUser.getDisplayName())}',
			username : '#{currentUser.properties.userId}',
			id : '#{currentUser.id}' 
		};
		// get session timeout in minutes
		EMF.config.sessionTimeout = '#{applicationConfigurationProvider.sessionTimeoutPeriod}';
		EMF.config.pagerPageSize = #{applicationConfigurationProvider.pagerPageSize};
		EMF.config.pagerMaxPages = #{applicationConfigurationProvider.pagerMaxPages};
		// if debug mode of javascripts should be enabled
		EMF.config.debugEnabled = #{applicationConfigurationProvider.javascriptDebug};
		EMF.config.maxSize = #{applicationConfigurationProvider.maxUploadSize};
		EMF.config.searchResultMaxSize = #{applicationConfigurationProvider.searchResultMaxSize};
		EMF.config.searchFacetResultExceedDisable = #{applicationConfigurationProvider.searchFacetResultExceedDisable};
		
		// default uri prefix for emf id's
		EMF.uriPrefix = "emf:";
    
        SF.config.dateFormatPattern = '#{dateUtil.dateFormatPattern}';
        SF.config.dateExtJSFormatPattern = '#{dateUtil.dateExtJSFormatPattern}';
        // array with month names - used in jquery datepicker
        SF.config.monthNames        = #{dateUtil.monthNames};
		// 
        SF.config.monthNamesShort   = #{dateUtil.monthNamesShort};
     	// array with full day names - used in jquery datepicker
        SF.config.dayNames	        = #{dateUtil.dayNames};
        // array with short day names - used in jquery datepicker
        SF.config.dayNamesMin       = #{dateUtil.dayNamesMin};
		// localised first week day in datepicker
        SF.config.firstDay 			= #{dateUtil.firstWeekDay};
		// localised timepicker time label
        SF.config.timeText 			= '#{dateUtil.timeText}';
        // localised timepicker hour label
        SF.config.hourText 			= '#{dateUtil.hourText}';
        // localised timepicker minute label
        SF.config.minuteText 		= '#{dateUtil.minuteText}';
	     // localised timepicker 'now' label
        SF.config.currentText 		= '#{dateUtil.currentText}';
        // localised timepicker 'Done' label
        SF.config.closeText 		= '#{dateUtil.closeText}';
        // datepicker register for year range
        SF.config.yearRange			= '#{dateUtil.yearRange}';
        
        // example result: /CMF/javax.faces.resource/.jsf?ln=sf 
        SF.config.jsfResources      = '#{resource["/js/emf-app.js"]}'.replace('js/emf-app.js','');
        // example result: /CMF/javax.faces.resource/
        SF.config.jsfResourcesPath  = SF.config.jsfResources.substring(0, SF.config.jsfResources.lastIndexOf('/') + 1);
        // example result: .jsf?ln=sf
        SF.config.jsfLibSuffix      = SF.config.jsfResources.split(SF.config.jsfResourcesPath)[1];
        // /CMF
        SF.config.contextPath       = '#{request.contextPath}';
        // http:/host:port/CMF/test/home-external.jsf
        SF.config.requestURL        = '#{request.requestURL}';
        // /CMF/test/home-external.jsf
        SF.config.requestURI        = '#{request.requestURI}';
        // example: test/home-external.jsf
        SF.config.servletPath       = '#{request.servletPath.substring(1, request.servletPath.length())}';
        // http://host:port/emf/
        SF.config.baseURL = EMF.config.baseURL = '#{applicationConfigurationProvider.baseURL}';
        
		// Extension point trough which other modules can provide additional javascript configurations
		// see: js-config-cmf.xhtml
		<emf:insertPageFragments point="js.config" />
	</script>
</ui:composition>
</html>