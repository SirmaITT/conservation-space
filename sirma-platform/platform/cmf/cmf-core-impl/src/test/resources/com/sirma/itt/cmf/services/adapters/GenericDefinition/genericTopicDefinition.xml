<?xml version="1.0"?>
<definition id="topicDefinition" type="topic" referenceId="commentDefinition">
	<fields>
		<field name="type" type="an..20" uri="emf:type" />
		<field name="status" type="an..10" uri="emf:status" codelist="CL4" />
		<field name="title" type="an..200" uri="dcterms:title" />
		<field name="about" type="an..100" uri="emf:commentsOn">
			<control id="INSTANCE" />
		</field>
		<field name="aboutSection" type="an..100" uri="emf:commentsOnSection">
			<control id="INSTANCE" />
		</field>
		<field name="imageAnnotation" type="INSTANCE" uri="emf:hasImageAnnotation">
			<control id="INSTANCE" />
		</field>
		<field name="tags" type="an..100" uri="emf:tag" />
		<field name="emf:isDeleted" type="boolean" displayType="system"
			uri="emf:isDeleted" dmsType="FORBIDDEN">
			<value>false</value>
		</field>
	</fields>

	<transitions>
		<!-- Adds the the comment transitions the post comment action -->
		<transition id="createComment" label="topicDefinition.createComment.btn.title"
			eventId="createComment" purpose="action" />
		<transition id="suspend" label="topicDefinition.suspend.btn.title"
			eventId="suspend" purpose="action" />
		<transition id="restart" label="topicDefinition.restart.btn.title"
			eventId="restart" purpose="action" />
	</transitions>

	<stateTransitions>
		<stateTransition from="*" transition="createTopic" to="CM237001" />
		<stateTransition from="CM237001" transition="editDetails"
			to="CM237001" />
		<stateTransition from="CM237001" transition="createComment"
			to="CM237001" />
		<stateTransition from="CM237001" transition="suspend"
			to="CM237002" />
		<stateTransition from="CM237002" transition="restart"
			to="CM237001" />
		<stateTransition from="*" transition="delete" to="DELETED" />
	</stateTransitions>

	<allowedChildren>
		<child type="comment" id="ALL" />
	</allowedChildren>

	<labels>
		<label id="topicDefinition.createComment.btn.title">
			<value lang="bg">Създай тема</value>
			<value lang="en">New Topic</value>
		</label>
		<label id="topicDefinition.suspend.btn.title">
			<value lang="bg">затвори</value>
			<value lang="en">suspend</value>
		</label>
		<label id="topicDefinition.restart.btn.title">
			<value lang="bg">отвори</value>
			<value lang="en">restart</value>
		</label>
	</labels>
</definition>