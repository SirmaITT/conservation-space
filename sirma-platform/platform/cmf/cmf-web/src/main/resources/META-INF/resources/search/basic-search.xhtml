<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:h="http://java.sun.com/jsf/html"
	template="/common/default-template.xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:emf="http://com.sirma.itt.emf">

	<ui:define name="contextData">

		<div id="object" class="library-header">
			<a id="libraryBookmarkLink" class="library-link" href="#"> <span
				class="library-icon icon sprite sprite-objectslibrary-icon-24"></span>
				<span class="library-title" data-value=""></span>
			</a>
		</div>

		<div id="project" class="library-header">
			<a id="projectBookmarkLink" class="library-link" href="#"> <span
				class="library-icon icon sprite sprite-projectinstance-icon-24"></span>
				<span class="library-title" data-value=""></span>
			</a>
		</div>

		<div class="button-bar object-library">

			<!-- Rendered with JS jquery.emf-basic-search -->
			<h:link id="newProjectButton" outcome="projectinstance"
				value="#{label['pm.menu.new-project']}"
				styleClass="btn btn-xs btn-primary create-object-button">
				<f:param name="simpleLink" value="true" />
				<f:param name="actionId" value="createProject" />
			</h:link>

			<h:link id="createObjectButton" rendered="#{objectsLibraryAction.canCreateObject()}"
				styleClass="btn btn-xs btn-primary create-object-button"
				value="#{label['operation.object.create']}" outcome="object">
				<f:param name="definitionType"
					value="#{objectsLibraryAction.definitionType}" />
				<f:param name="autoselect" value="true" />
			</h:link>

			<div class="pull-left">
				<emf:panel id="objectLibraryActions" styleClass="allowed-actions-inline">
					<ui:include src="/common/min-allowed-actions.xhtml">
						<ui:param name="renderLabel" value="true" />
						<ui:param name="placeholder" value="#{objectsLibraryAction.libraryType}" />
						<ui:param name="currentInstance" value="#{objectsLibraryAction.classInstance}" />
					</ui:include>
				</emf:panel>
			</div>

		</div>
	</ui:define>

	<ui:define name="facets">
		<div id="facets" class="search-facets"></div>
	</ui:define>

	<ui:define name="content">

		<div class="content">
			<div id="contentBody" class="basic-search-placeholder content-body" facets-listener="true">
				<facets></facets>
			</div>
		</div>

		<script type="text/javascript">
			$(function() { 
				/** Initializes the basic search. */
				EMF.search.init();
				
				/** Manually bootstraps the facets module when the page is ready. */
				angular.element(document).ready(function() {
				      angular.bootstrap(document, ['facets']);
				}); 
			});
		</script>
	</ui:define>

</ui:composition>