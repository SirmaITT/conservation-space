<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:emf="http://com.sirma.itt.emf"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

	<ui:include src="/common/confirmation.xhtml">
		<ui:param name="action" value="#{action}" />
		<ui:param name="currentInstance" value="#{currentInstance}" />
		<ui:param name="popupRenderCondition" value="#{action.confirmationMessage != null}" />
	</ui:include>
	<ui:remove><!-- Extension point that allows action button implementations to be provided from other modules --></ui:remove>
	<emf:insertPageFragments point="action.button.extension.point" />
	<ui:remove><!-- default action button template --></ui:remove>
	<h:panelGroup rendered="#{actionButtonRenderConditions.shouldRenderDefaultButton(action, currentInstance)}">
		<a4j:commandLink id="actionLink"
			action="#{actionsManager.executeAllowedAction(action, currentInstance)}"
			onclick="#{onClickAttribute}; CMF.detailsDashlet.dashletAlreadyLoaded = false;"
			disabled="#{action.disabled}"
			styleClass="#{actionsManager.getActionStyleClass(btnActionClass, currentInstance, action, minActionsMode)} default-action blockUI"
			value=""
			immediate="#{action.immediateAction}"
			execute="@this"
			render="#{(reloadPanel != null) ? reloadPanel : '@form'}"
			onbegin="#{onBegin}"
			oncomplete="#{onComplete};"
			rendered="#{renderCondition}">
			<span class="button-label">#{minActionsMode != null ? '' : action.label}</span>
			<div class="tooltip">
				<span>#{action.label}</span>
			</div>
		</a4j:commandLink>
	</h:panelGroup>
	<h:panelGroup rendered="#{actionButtonRenderConditions.renderNoPermissionMessage(action)}" layout="block">
		<a name="nopermissions">#{label['cmf.btn.actions.no_permissions']}</a>
	</h:panelGroup>
	
</ui:composition>
