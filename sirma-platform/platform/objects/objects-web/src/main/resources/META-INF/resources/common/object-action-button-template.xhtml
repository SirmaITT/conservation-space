<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:h="http://java.sun.com/jsf/html">

	<ui:remove><!-- action button for object move operation --></ui:remove>
	<h:panelGroup rendered="#{objectActionButtonRenderConditions.renderObjectMoveSameCase(action,currentInstance)}">
		<a4j:commandLink id="moveObjectSameCaseActionButton"
			action="#{actionsManager.executeAllowedAction(action, currentInstance)}"
			oncomplete="CMF.action.moveInstance({
				instanceId:'#{currentInstance.getId()}', 
				instanceType:'#{currentInstance.getClass().getSimpleName().toLowerCase()}',
				contextId:'#{contextInstance != null ? contextInstance.getId(): ''}',
				contextType:'#{contextInstance != null ? contextInstance.getClass().getSimpleName().toLowerCase(): ''}',
				sourceId:'#{currentInstance.getOwningInstance() != null ? currentInstance.getOwningInstance().getId(): ''}', 
				sourceType:'#{currentInstance.getOwningInstance() != null ? currentInstance.getOwningInstance().getClass().getSimpleName().toLowerCase(): ''}'
			});"
			disabled="#{action.disabled}"
			styleClass="#{actionsManager.getActionStyleClass(btnActionClass, currentInstance, action, minActionsMode)}"
			value=""
			immediate="#{action.immediateAction}"
			render=""
			execute="@this"
			rendered="#{renderCondition}">
			<span class="button-label">#{minActionsMode != null ? '' : action.label}</span>
			<div class="tooltip">
				<span>#{action.label}</span>
			</div>
		</a4j:commandLink>
	</h:panelGroup>
	
	<ui:remove><!-- action button for clone object --></ui:remove>
	<h:panelGroup rendered="#{objectActionButtonRenderConditions.renderCloneObjectButton(action,currentInstance)}">
		<a4j:commandLink id="cloneActionButton"
			action="#{actionsManager.executeAllowedAction(action, currentInstance)}"
			oncomplete="CMF.action.clone({
				actionId: '#{action.identifier}', 
				currentInstanceId: '#{currentInstance.getId()}', 
				currentInstanceType:'#{currentInstance.getClass().getSimpleName().toLowerCase()}', 
				owningInstanceId: '#{currentInstance.getOwningInstance() != null ? currentInstance.getOwningInstance().getId() : contextInstance.getId()}', 
				contextInstanceId: '#{documentContext.CaseInstance != null ? documentContext.CaseInstance.getId() : ''}'
			});"
			disabled="#{action.disabled}"
			styleClass="#{actionsManager.getActionStyleClass(btnActionClass, currentInstance, action, minActionsMode)}"
			value=""
			immediate="#{action.immediateAction}"
			render="closingReasonPopup"
			execute="@this"
			rendered="#{renderCondition}">
			<span class="button-label">#{minActionsMode != null ? '' : action.label}</span>
			<div class="tooltip">
				<span>#{action.label}</span>
			</div>
		</a4j:commandLink>
	</h:panelGroup>
	
	<ui:remove><!-- action button for add object thumbnail operation --></ui:remove>
	<h:panelGroup rendered="#{objectActionButtonRenderConditions.renderAddObjectThumbnail(action,currentInstance)}">
		<a4j:commandLink id="addThumbnailActionButton"
			action="#{actionsManager.executeAllowedAction(action, currentInstance)}"
			oncomplete="EMF.search.picker.image({
				instanceId: '#{currentInstance.getId()}',
				instanceType: '#{currentInstance.getClass().getSimpleName().toLowerCase()}'
				}, event);"
			disabled="#{action.disabled}"
			styleClass="#{actionsManager.getActionStyleClass(btnActionClass, currentInstance, action, minActionsMode)}"
			value=""
			immediate="#{action.immediateAction}"
			render=""
			execute="@this"
			rendered="#{renderCondition}">
			<span class="button-label">#{minActionsMode != null ? '' : action.label}</span>
			<div class="tooltip">
				<span>#{action.label}</span>
			</div>
		</a4j:commandLink>
	</h:panelGroup>
	
		<ui:remove><!-- action button for add object primary image operation --></ui:remove>
	<h:panelGroup rendered="#{objectActionButtonRenderConditions.renderAddPrimaryImage(action,currentInstance)}">
		<a4j:commandLink id="addPrimaryImageActionButton"
			action="#{actionsManager.executeAllowedAction(action, currentInstance)}"
			oncomplete="EMF.search.picker.primaryImage({
				instanceId: '#{currentInstance.getId()}',
				instanceType: '#{currentInstance.getClass().getSimpleName().toLowerCase()}'
				}, event);"
			disabled="#{action.disabled}"
			styleClass="#{actionsManager.getActionStyleClass(btnActionClass, currentInstance, action, minActionsMode)}"
			value=""
			immediate="#{action.immediateAction}"
			render=""
			execute="@this"
			rendered="#{renderCondition}">
			<span class="button-label">#{minActionsMode != null ? '' : action.label}</span>
			<div class="tooltip">
				<span>#{action.label}</span>
			</div>
		</a4j:commandLink>
	</h:panelGroup>
	
	<ui:remove><!-- action button for create objects --></ui:remove>
	<h:panelGroup rendered="#{objectActionButtonRenderConditions.renderCreateObject(action,currentInstance)}">
		<h:outputLink id="createObjectActionButton"
			onclick="OBJ.actions.createObject({
				instanceId	:'#{currentInstance.getId()}', 
				instanceType:'#{currentInstance.getClass().getSimpleName().toLowerCase()}', 
				contextId	:'#{contextInstance != null ? contextInstance.getId(): ''}',
				contextType	:'#{contextInstance != null ? contextInstance.getClass().getSimpleName().toLowerCase(): ''}',
				sourceId	:'#{currentInstance.getOwningInstance() != null ? currentInstance.getOwningInstance().getId(): ''}', 
				sourceType	:'#{currentInstance.getOwningInstance() != null ? currentInstance.getOwningInstance().getClass().getSimpleName().toLowerCase(): ''}'
				}, event); return false;"
			disabled="#{action.disabled}"
			styleClass="#{actionsManager.getActionStyleClass(btnActionClass, currentInstance, action, minActionsMode)}"
			value=""
			rendered="#{renderCondition}">
			<span class="button-label">#{minActionsMode != null ? '' : action.label}</span>
			<div class="tooltip">
				<span>#{action.label}</span>
			</div>
		</h:outputLink>
		<h:inputHidden id="createObjectHiddenField" value="#{objectAction.createObjectData}" />
		<a4j:commandLink id="createObjectHiddenButton" action="#{objectAction.createObjectAction()}" 
			execute="createObjectHiddenButton, createObjectHiddenField" styleClass="hidden" />
	</h:panelGroup>
	
	<ui:remove><!-- action button for attach objects --></ui:remove>
	<h:panelGroup rendered="#{objectActionButtonRenderConditions.renderAttachObject(action,currentInstance)}">
		<a4j:commandLink id="attachObjectActionButton"
			action="#{actionsManager.executeAllowedAction(action, currentInstance)}"
			oncomplete="EMF.search.picker.attachObject('#{currentInstance.getId()}','#{currentInstance.getClass().getSimpleName().toLowerCase()}');"
			disabled="#{action.disabled}"
			styleClass="#{actionsManager.getActionStyleClass(btnActionClass, currentInstance, action, minActionsMode)}"
			value=""
			immediate="#{action.immediateAction}"
			render="closingReasonPopup"
			execute="@this"
			rendered="#{renderCondition}">
			<span class="button-label">#{minActionsMode != null ? '' : action.label}</span>
			<div class="tooltip">
				<span>#{action.label}</span>
			</div>
		</a4j:commandLink>
	</h:panelGroup>

	<ui:remove><!-- action button for detach object --></ui:remove>
	<h:panelGroup rendered="#{objectActionButtonRenderConditions.renderDetachObjectButton(action, currentInstance)}">
		<h:outputLink id="detachObjectActionButton"
			onclick="CMF.action.detach(event, {
				confirmation:'#{action.confirmationMessage}', 
				attachedInstanceId:'#{currentInstance.getId()}', 
				operationId:'#{action.getActionId()}',
				attachedInstanceType:'#{currentInstance.getClass().getSimpleName().toLowerCase()}', 
				targetId:'#{actionContext.getActionTarget().getOwningInstance().getId()}', 
				targetType:'#{actionContext.getActionTarget().getOwningInstance().getClass().getSimpleName().toLowerCase()}'});"
			disabled="#{action.disabled}"
			styleClass="#{actionsManager.getActionStyleClass(btnActionClass, currentInstance, action, minActionsMode)}"
			value=""
			rendered="#{renderCondition}">
			<span class="button-label">#{minActionsMode != null ? '' : action.label}</span>
			<div class="tooltip">
				<span>#{action.label}</span>
			</div>
		</h:outputLink>
	</h:panelGroup>
	
	<ui:remove><!-- action button for upload object --></ui:remove>
	<h:panelGroup rendered="#{objectActionButtonRenderConditions.renderObjectUploadButton(action, currentInstance)}">
		<h:outputLink id="uploadObjectButton"
			onclick="return OBJ.actions.upload('#{currentInstance.getClass().getSimpleName().toLowerCase()}','#{currentInstance.getId()}');"
			disabled="#{action.disabled}"
			styleClass="#{actionsManager.getActionStyleClass(btnActionClass, currentInstance, action, minActionsMode)}"
			value=""
			rendered="#{renderCondition}">
			<span class="button-label">#{minActionsMode != null ? '' : action.label}</span>
			<div class="tooltip">
				<span>#{action.label}</span>
			</div>
		</h:outputLink>
	</h:panelGroup>
	
</ui:composition>
