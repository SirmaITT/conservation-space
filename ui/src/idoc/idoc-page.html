<div class="idoc-wrapper idoc-mode-{{idocPage.context.getMode()}}">
  <div ng-if="::idocPage.currentObject">
    <seip-sidebar context="::idocPage.context" class="no-print"></seip-sidebar>
    <div class="fixed-container" seip-ui-preference ui-preference-config="::idocPage.fixedContainerUIPreferenceConfig">
      <div class="idoc-context-wrapper" ng-show="idocPage.isHeaderVisible">
        <div class="idoc-header no-print">
          <seip-instance-header header-type="::idocPage.headerType" context="::idocPage.context"></seip-instance-header>
        </div>
        <div class="idoc-context-body no-print">
          <div class="idoc-template-selector-wrapper">
            <seip-select-idoc-template ng-if="::idocPage.actionContext"
                                       config="::idocPage.actionContext"
                                       callback="::idocPage.updateContentCallback">
            </seip-select-idoc-template>
          </div>
          <div class="idoc-info-area-wrapper">
            <seip-info-area context="::idocPage.context"></seip-info-area>
          </div>
          <div class="idoc-context-actions-wrapper" ng-class="::{'has-help' : !!idocPage.helpTarget}">
            <seip-contextual-help ng-if="::idocPage.helpTarget" target="idocPage.helpTarget">
            </seip-contextual-help>
            <div class="idoc-context-actions-body">
              <button class="btn btn-sm btn-primary seip-btn-just-save" ng-if="idocPage.context.isEditMode()"
                      ng-click="idocPage.disableSaveButton(true); idocPage.actionExecutor.execute(idocPage.saveIdocAndContinueAction, idocPage.actionContext)">
                <span data-label="idoc.page.button.just.save">{{::'idoc.page.button.just.save'|translate}}</span>
              </button>
              <button class="btn btn-sm btn-default seip-btn-save" ng-if="idocPage.context.isEditMode()"
                      ng-click="idocPage.disableSaveButton(true); idocPage.actionExecutor.execute(idocPage.saveIdocAndPreviewAction, idocPage.actionContext)">
                <span data-label="idoc.page.button.save">{{::'idoc.page.button.save'|translate}}</span>
              </button>
              <button class="btn btn-sm btn-default seip-btn-cancel" ng-if="idocPage.context.isEditMode()"
                      ng-click="idocPage.actionExecutor.execute(idocPage.cancelSaveIdocAction, idocPage.actionContext)">
                {{::'idoc.page.button.cancel'|translate}}
              </button>
              <button class="btn btn-sm btn-primary seip-btn-edit"
                      ng-if="idocPage.currentObject.getId() && idocPage.context.isPreviewMode() && idocPage.editAllowed"
                      ng-click="idocPage.actionExecutor.execute(idocPage.editIdocAction, idocPage.actionContext)"
                      ng-disabled="idocPage.disableEditButton">
                {{::'idoc.page.button.edit'|translate}}
              </button>
              <seip-actions-menu context="::idocPage.actionContext"></seip-actions-menu>
            </div>
          </div>
        </div>
      </div>
      <seip-toolbar config="::idocPage.actionContext"></seip-toolbar>
      <seip-idoc-tabs config="idocPage.tabsConfig" mode="idocPage.context.getMode()" class="no-print"></seip-idoc-tabs>
      <div class="idoc-editor-toolbar-container"
           ng-show="idocPage.context.isEditMode() && !idocPage.tabsConfig.getActiveTab().locked">
        <div id="idoc-editor-toolbar"></div>
        <div class="idoc-editor-toolbar-addons">
          <a class="seip-btn-toggle-header fa" ng-click="idocPage.toggleHeader()">
            <i class="fa"
               ng-class="{'fa-angle-double-up' :idocPage.isHeaderVisible,'fa-angle-double-down': !idocPage.isHeaderVisible}"></i>
          </a>
        </div>
      </div>
    </div>

    <div class="idoc-body" seip-ui-preference ui-preference-config="::idocPage.idocBodyUIPreferenceConfig">
      <div class="tab-content">
        <section ng-repeat="tab in idocPage.tabsConfig.tabs" id="tab-{{::tab.id}}"
                 class="idoc-tab tab-pane fade"
                 ng-class="{'in active': idocPage.showTab(tab), 'system-tab': tab.system === true}">
          <footer ng-if="$index > 0"></footer>
          <idoc-tab-body tab="::tab" context="::idocPage.wrappedContext" tabs-config="::idocPage.tabsConfig"></idoc-tab-body>
        </section>
      </div>
    </div>
  </div>
</div>
